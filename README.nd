# UrlShortener

**UrlShortener** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö URL —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Å—ã–ª–æ–∫ –≤ PostgreSQL, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —á–µ—Ä–µ–∑ Redis –∏ –≤—ã–¥–∞—á–µ–π –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –≤–∏–¥–∞:


–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ä–∞–∑–¥–µ–ª—è–µ—Ç API, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º –∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–ª–∏–Ω–Ω—ã–π URL –≤ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–¥ |
| –†–µ–¥–∏—Ä–µ–∫—Ç `/r/{code}` | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL |
| JWT –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + –≤—Ö–æ–¥, —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º |
| PostgreSQL | –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å—Å—ã–ª–æ–∫ |
| Redis | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥ ‚Üí URL –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è |
| Serilog | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ |
| Swagger UI | –£–¥–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä |

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

src/
‚îú‚îÄ‚îÄ UrlShortener.Api              # –í–Ω–µ—à–Ω–∏–π —Å–ª–æ–π, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, JWT, Swagger
‚îú‚îÄ‚îÄ UrlShortener.Application      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–µ—Ä–≤–∏—Å—ã)
‚îú‚îÄ‚îÄ UrlShortener.Core             # –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îî‚îÄ‚îÄ UrlShortener.Infrastructure   # EF Core, PostgreSQL, Redis


**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
- –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ–Ω–∏—Ç—å PostgreSQL –Ω–∞ MySQL)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç –ë–î
- –ü—Ä–æ–µ–∫—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∫–æ–¥–∞

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –î–ª—è —á–µ–≥–æ |
|-----------|---------|
| .NET 9 / ASP.NET Core | Backend |
| EF Core | –†–∞–±–æ—Ç–∞ —Å –ë–î |
| PostgreSQL | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| Redis (StackExchange.Redis) | –ö—ç—à |
| Serilog | –õ–æ–≥–∏ |
| JWT | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| Swagger | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API |

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **Docker**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **.NET SDK 9+**

---

### 2. –ó–∞–ø—É—Å–∫ PostgreSQL + Redis

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```bash
docker-compose up -d

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

docker ps

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (src/UrlShortener.Api/appsettings.json)


"ConnectionStrings": {
  "Default": "Host=localhost;Port=5432;Database=urlshort;Username=postgres;Password=postgres"
},
"Redis": {
  "Configuration": "localhost:6379"
},
"Jwt": {
  "Key": "–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß",
  "Issuer": "UrlShortener",
  "Audience": "UrlShortener"
}

–í–∞–∂–Ω–æ: –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• 32 —Å–∏–º–≤–æ–ª–æ–≤.

–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

dotnet ef database update --project src/UrlShortener.Infrastructure --startup-project src/UrlShortener.Api

–ó–∞–ø—É—Å–∫ API

dotnet run --project src/UrlShortener.Api

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

http://localhost:<–ø–æ—Ä—Ç>/swagger

üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST /api/auth/register

–í—Ö–æ–¥
POST /api/auth/login

–û–±–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç:

{
  "token": "<jwt>"
}

–í Swagger –Ω–∞–∂–∞—Ç—å Authorize ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å:

Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>


‚úÇÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏

{
  "url": "https://google.com"
}

–û—Ç–≤–µ—Ç:

{
  "url": "http://localhost:5095/r/AbCd12"
}

üîÅ –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ

GET /r/AbCd12

üßë‚Äçüíª –ê–≤—Ç–æ—Ä

Nikita Dobrodski
GitHub: https://github.com/NikitaDobrodski
